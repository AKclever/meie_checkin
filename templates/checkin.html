{% extends "base.html" %}

{% block content %}
<div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-5 sm:p-6 space-y-5">
  <div class="flex items-start justify-between gap-2">
    <div>
      <h2 class="text-lg font-semibold">Nädala check-in</h2>
      <p class="text-xs text-slate-400">
        {{ week_start }} · {{ user.name }} · võta 5 minutit aususe jaoks ✨
      </p>
    </div>
  </div>

  <form method="post" class="space-y-4 text-sm">
    {% for q in questions %}
      <div class="space-y-1">
        <label class="block text-xs font-medium text-slate-200">{{ q.text }}</label>

        {% if q.kind == "scale" %}
          <div class="flex items-center gap-3">
            <input
              type="range"
              name="q_{{ q.id }}"
              min="1"
              max="10"
              value="7"
              class="w-full accent-brand-500"
            >
            <span class="inline-flex w-8 justify-center rounded-md bg-slate-800 border border-slate-700 text-[11px] text-slate-200 scale-value">
              7
            </span>
          </div>
          <p class="text-[11px] text-slate-500">1 = väga kauge, 10 = väga lähedane</p>
        {% else %}
          <textarea
            name="q_{{ q.id }}"
            rows="3"
            class="w-full rounded-lg border border-slate-700 bg-slate-900/70 px-3 py-2 text-sm
                   focus:outline-none focus:ring-1 focus:ring-brand-400 focus:border-brand-400"
          ></textarea>
        {% endif %}
      </div>
    {% endfor %}

    <button
      type="submit"
      class="inline-flex items-center justify-center rounded-full bg-brand-500 px-5 py-2 text-xs font-medium text-slate-950 hover:bg-brand-400 transition shadow-lg shadow-brand-500/40"
    >
      Salvesta selle nädala tunded
    </button>
  </form>

  <!-- väike JS, et range value'd näidata (valikuline) -->
  <script>
    document.querySelectorAll('input[type="range"]').forEach((slider) => {
      const wrapper = slider.closest('div');
      const badge = wrapper.querySelector('.scale-value');
      const update = () => badge && (badge.textContent = slider.value);
      slider.addEventListener('input', update);
      update();
    });
  </script>
</div>
{% endblock %}
